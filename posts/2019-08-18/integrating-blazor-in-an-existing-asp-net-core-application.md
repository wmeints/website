---
title: Integrating Blazor in an existing ASP.NET Core application
category: Web development
datePublished: "2019-08-18"
dateCreated: "2019-08-18"
---

<p>ASP.NET Core 3.0 is shaping up to be awesome with the addition of Blazor. This unique development model allows you to write client-side web app logic in C# rather than using JavaScript. A big win for developers who are lost in the world of Javascript but still need to write interactive client logic. But how can you upgrade your existing app to this new framework?</p><p>I'm currently working on rebuilding my blog in ASP.NET Core 3.0 as an exercise and because I feel much more at home in C# and .NET. As part of this, I've tried different client frameworks for my content editor and settled on Blazor as it means I can stick completely to C#. </p><p>In this post I'll show you how I integrated Blazor into my project and how you can add server-side Blazor components to your existing ASP.NET Core web application.</p><h2 id="what-is-blazor">What is Blazor?</h2><p>Blazor is a new set of Â components that are part of the upcoming ASP.NET Core 3.0 release. Blazor allows you to write client-side logic in your web application using C#.</p><p>Blazor uses the Razor syntax to create Razor Components. The syntax should feel very familiar, since you're already using Razor syntax in your MVC applications.</p><p>There are two flavors for hosting Blazor components in your web application: Client-side and server-side. The client-side version runs your C# code in the browser on the computer of the visiting user using web assembly. </p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/content/images/2019/08/client-side.png" class="kg-image"><figcaption>Client-side hosting model for Blazor</figcaption></figure><p>So when a user clicks a button on the page, the event handler, written in C#, that is connected to the button is run in the browser. </p><p>The server-side variant works exactly the same, but runs the same code on the server. The client browser interacts with the server-side code through a SignalR connection.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="/content/images/2019/08/server-side.png" class="kg-image"><figcaption>Server-side hosting model for Blazor</figcaption></figure><p>This means that when a user clicks a button, an event is sent to the server over SignalR where it is processed inside the razor component that is hosted on the page.</p><h2 id="choosing-between-server-side-and-client-side">Choosing between server-side and client-side</h2><p>Whether you want to run your Blazor components entirely in the browser or on the server depends largely on the people that are going to visit your website. </p><p>When your audience uses older computers with older browsers then server-side Blazor is a great option. It works on most older browsers and only requires a SignalR connection to be kept open to the server.</p><p>In the server-side hosting model, the server runs a so-called circuit per component to maintain the state of the component. This means that there's additional overhead involved in running server-side Blazor.</p><p>If your audience uses mostly modern webbrowsers then using client-side Blazor is a good idea. It eliminates the circuits on the server, freeing up your webserver to do other things.</p><p>In my project I used server-side Blazor. I have a modern browser, but I felt that the server-side blazor required fewer steps to integrate so that's what I'll cover in this post.</p><h2 id="integrating-server-side-blazor-in-your-web-application">Integrating server-side Blazor in your web application</h2><p>When you've got an existing ASP.NET core application and you want to benefit from the rich client capabilities of Blazor components you'll need to perform three steps:</p><ol><li>Enable the server-side blazor dependencies</li><li>Extend the HTTP pipeline with Blazor</li><li>Create and host the actual Blazor components</li></ol><p>Let's start by enabling server-side blazor components. </p><h3 id="step-1-enable-the-server-side-blazor-dependencies">Step 1: Enable the server-side blazor dependencies</h3><p>Modify the <code>ConfigureServices</code> method in the <code>Startup.cs</code> file, and add the following code:</p><pre><code>services.AddServerSideBlazor();</code></pre><p>This enables the server-side blazor dependencies.</p><h3 id="step-2-extend-the-http-pipeline-with-blazor">Step 2: Extend the HTTP pipeline with Blazor</h3><p>Now that we have the runtime dependencies for Blazor, let's extend the HTTP pipeline with Blazor components:</p><pre><code>app.UseRouting();

app.UseEndpoints(endpoints =&gt;
{
// .. Other endpoint mappings
endpoints.MapBlazorHub();
});</code></pre><p>The first line enables endpoint routing in ASP.NET Core. The next line maps the endpoints in the application. Usually, you'll find mappings for razor pages and MVC controllers. Extend this with the <code>MapBlazorHub</code> method call to enable Blazor.</p><h3 id="step-3-create-and-host-the-actual-blazor-components">Step 3: Create and host the actual Blazor components</h3><p>Finally, when you've setup the HTTP pipeline and dependencies for Blazor, create a new file <code>ContentEditor.razor</code> file with the following content:</p><pre><code>&lt;h3&gt;ContentEditor&lt;/h3&gt;

@code {

}
</code></pre><p>A razor component is similar to a normal Razor Page or Razor view. It can contain HTML mixed with Razor syntax. Unique for a Razor component is the <code>@code</code> section which defines the behavior for the component. It can contain C# methods, and properties. </p><p><strong>Tip: </strong>Store razor components in a <code>Components</code> folder, so you'll have <code>Views</code>, <code>Pages</code>, and <code>Components</code> separated from each other. This makes for a much clearer and cleaner setup.</p><p>To render the component on a page, include the following code in the Razor view or page where you want the component to be loaded:</p><pre><code>@page
@model FizzyLogic.Areas.Editor.Pages.Posts.NewModel
@{
ViewBag.Title = "Create new post";
}
&lt;script src="~/\_framework/blazor.server.js"&gt;&lt;/script&gt;
&lt;ContentEditor&gt;@(await Html.RenderComponentAsync&lt;ContentEditor&gt;())&lt;/ContentEditor&gt;</code></pre><p>In this example, I've created a Razor page <code>New.cshtml</code> which has a code-behind model named <code>NewModel</code>. </p><p>To host Blazor components on this page, include the script <code>\_framework/blazor.server.js</code> before rendering the component itself.</p><p>Render the component by invoking <code>Html.RenderComponentAsync</code> with the type of the component that you want to render.</p><p>Wrap the component in a custom HTML element to tell the browser that it's dealing with a custom element. This is required for Blazor to work correctly.</p><p><strong>Tip</strong>: The name of the component doesn't need to match the name of the custom HTML element, although it does make it clear what component is being rendered.</p><h2 id="summary">Summary</h2><p>So, there you go, it doesn't take a lot to integrate Blazor into existing ASP.NET Core applications. No more Javascript misery!</p>
