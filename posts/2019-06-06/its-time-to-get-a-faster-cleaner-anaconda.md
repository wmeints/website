---
title: 'It''s time to get a faster, cleaner anaconda'
category: Machine Learning
datePublished: '2019-06-06'
dateCreated: '2019-06-06'
---
<p>Why I downloaded massive anaconda binaries in the past is beyond me to be honest. I like to use virtual environments, so almost none of the stuff in the base anaconda installation is ever used. Time to change things around and get a leaner, faster anaconda installation.</p><p>In this post, I'll show you how you can switch your computer to using miniconda and how I use virtual environments in my projects to keep a clean workspace.</p><h2 id="getting-miniconda">Getting miniconda</h2><p>Let's start by getting miniconda installed. Miniconda is a Anaconda variant that contains a minimal set of tools to get started with Python on Anaconda. Unlike the full blown Anaconda distribution it doesn't contain packages like scipy, scikit-learn and pandas. You have to install those manually.</p><p>The benefit of Miniconda is that it is only 58MB on Windows. That's a lot less then the 500MB installer that you have to download for Anaconda.</p><p>You can download the miniconda installer from <a href="https://docs.conda.io/en/latest/miniconda.html">the anaconda website</a>. Once downloaded, follow the instructions to install it on your machine.</p><p>Make sure to include the anaconda tools in your PATH variable. The installer will provide the options for this during installation.</p><p>Now that you have miniconda installed, let's take a look at how you can use it from Powershell and Visual Studio Code on Windows.</p><h2 id="setting-up-powershell-for-python-development">Setting up powershell for python development</h2><p>My personal favorite terminal on Windows is Powershell. It has a pretty decent scripting engine and many open source extensions exist for it.</p><h3 id="setting-up-useful-powershell-modules">Setting up useful PowerShell modules</h3><p>For example, I like to have the following extensions installed on my machine:</p><ul><li><a href="https://github.com/dahlbyk/posh-git">posh-git</a></li><li><a href="https://github.com/JanDeDobbeleer/oh-my-posh">oh-my-posh</a></li></ul><p>The posh-git extension shows the git status for the current directory. With this you can quickly see if you have any pending changes or need to push commits to the server.</p><p>The second extension, oh-my-posh contains a customizable prompt with several themes. It's not strictly necessary, but it's a nice addition and it makes my command prompt less boring.</p><p>To install these extensions, you first need to set up the NuGet module feed for PowerShell:</p><pre><code>Install-PackageProvider NuGet -MinimumVersion '2.8.5.201' -Force
Set-PSRepository -Name PSGallery -InstallationPolicy Trusted</code></pre><p>First, we add the NuGet package provider to PowerShell. Next, we configure the policy for the PSGallery repository so it is trusted. Note, you can always disable this afterwards if you want.</p><p>After setting up the feed, we can install the modules using the following commands:</p><pre><code>Install-Module -Name 'posh-git'
Install-Module -Name 'oh-my-posh'</code></pre><p>Once installed, edit your powershell profile using the following command:</p><pre><code>notepad $profile</code></pre><p>Include the following lines in the file:</p><pre><code>Import-Module 'posh-git'
Import-Module 'oh-my-posh'
Set-Theme agnoster</code></pre><p>The first line imports the git module for the status information. The second line imports the oh-my-posh module. Finally, the third line sets the theme for the oh-my-posh module to agnoster.</p><p>Let's modify PowerShell some more with the addition of the anaconda tools.</p><h3 id="adding-anaconda-commands-to-powershell">Adding anaconda commands to PowerShell</h3><p>Anaconda has a built-in virtual environment manager that allows you to run different Python versions side-by-side on your computer. This is an important tool for Python developers, because you will want different versions of packages depending on the project you're working on. Virtual environments support this.</p><p>To use the virtual environment tooling of Anaconda in PowerShell, you need to execute the following command:</p><pre><code>conda init powershell</code></pre><p>This will install a custom module in PowerShell that allows you to use virtual environments.</p><p>With the PowerShell environment set up, let's take a quick look at how to use virtual environments.</p><h2 id="working-with-miniconda-inside-powershell">Working with miniconda inside PowerShell</h2><p>In the previous sections, we've talked about installing and configuring miniconda. Because miniconda doesn't contain any packages, you'll need to use virtual environments. This might seem like a lot more work, but I assure you it will save you on headache medication. </p><p>To work on a new project, you'll need to create a virtual environment. You can create a new virtual environment with the following command:</p><pre><code>conda create -n myenv python=3.7 pip</code></pre><p>Running this command creates a new environment named myenv with python 3.7 and pip. </p><p>After you've created the environment, you can activate it using the following command:</p><pre><code>conda activate myenv</code></pre><p>Once, activated you can start installing packages using conda or pip"</p><pre><code>conda install scipy
pip install tensorflow</code></pre><p>Installing packages locally is really easy and also a little dangerous. Unless you tell your coworkers about the packages, they will probably run into errors telling them they are missing packages.</p><p>To fix this problem, you can export your environment to a descriptor file. Run the following command to export the environment:</p><pre><code>conda env export &gt; environment.yml</code></pre><p>This will create an anaconda environment file that contains all the settings you used to configure your virtual environment. Your coworkers can now get the same environment by using the following command:</p><pre><code>conda env update -f=environment.yml</code></pre><p>This will update the environment with the settings from the environment file. Similarly, you can create a new environment based on the file using the following command:</p><pre><code>conda env create -f=environment.yml -n myenv</code></pre><p>Done working on your project? You can deactivate the environment using the command:</p><pre><code>conda deactivate</code></pre><h2 id="here-s-to-your-new-clean-python-workspace">Here's to your new clean Python workspace</h2><p>And there it is, a cleaner, and faster way to work with Python inside PowerShell. Enjoy!</p>
